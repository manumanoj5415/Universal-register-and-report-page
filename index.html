<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Responsive Website</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="style.css" rel="stylesheet">
  <style>
    .logo-img {
      max-width: 150px;
      height: auto;
    }

    .partner-img {
      max-width: 100px;
      height: auto;
    }

    .header, .footer {
      padding: 1rem;
    }

    .dropdown-menu {
      min-width: 200px;
    }

    .form-control {
      max-width: 100%;
    }

    @media (max-width: 768px) {
      .form-col {
        margin-bottom: 1rem;
      }
      
      .header, .footer {
        text-align: center;
      }
    }

    @media (max-width: 576px) {
      .logo-img, .partner-img {
        max-width: 100px;
      }

      .dropdown-menu {
        width: 100%;
      }
    }
    .header-left, .header-right {
  flex: 1;
}

.header-right {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}

.header-left img, .header-right img {
  margin-bottom: 10px;
}

.navbar-nav .dropdown-menu {
  text-align: center;
}

.navbar {
  width: 100%;
}

.navbar-toggler {
  margin-left: auto;
}

@media (max-width: 768px) {
  .header-left, .header-right {
    justify-content: center;
  }
}
.form-control {
      border: 1px solid black;
    }
  </style>
</head>

<body>

  <!-- Header Section -->
  <header class="header py-3">
    <div class="container d-flex flex-column flex-md-row justify-content-between align-items-center">
      <!-- Left Section -->
      <div class="header-left d-flex flex-column flex-md-row align-items-center mb-3 mb-md-0 text-center text-md-left">
        <img src="electrical.jpeg" alt="Logo" class="img-fluid logo-img" style="max-width: 150px;">
        <div class="ms-3">
          <p class="text mb-0">Electronicals and Electronics</p>
          <p class="text mb-0">An ISO 9001:2005 Certified</p>
        </div>
      </div>
  
      <!-- Right Section -->
      <div class="header-right d-flex flex-column flex-md-row align-items-center">
        <img src="mms.jpg" alt="Image 1" class="img-fluid partner-img" style="max-width: 80px;">
        <img src="EGAC.png" alt="Image 2" class="img-fluid partner-img" style="max-width: 80px;">
        <img src="IAF.png" alt="Image 3" class="img-fluid partner-img" style="max-width: 80px;">
        <img src="NABCB.png" alt="Image 4" class="img-fluid partner-img" style="max-width: 80px;">
      </div>
    </div>
  
    <!-- Navigation -->
    <nav class="navbar navbar-expand-md navbar-light bg-light">
      <div class="container d-flex justify-content-end">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item dropdown me-2">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownPages" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Pages
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdownPages">
                <li><a class="dropdown-item" href="index.html">Installation Form</a></li>
                <li><a class="dropdown-item" href="index2.html">General Service Form</a></li>
                <li><a class="dropdown-item" href="index3.html">Vehicle Owner Information Form</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownReport" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Report page
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdownReport">
                <li><a class="dropdown-item" href="report.html">Installation report</a></li>
                <li><a class="dropdown-item" href="report2.html">General Service report</a></li>
                <li><a class="dropdown-item" href="report3.html">Vehicle Owner Information report</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>
  
  
  
  
  

  <!-- Main Content -->
  <main class="container my-5">
    <!-- Existing Table -->
    <table class="table table-bordered table-container">
      <tbody>
        <tr>
          <td class="text-center" id="repNo">Loading...</td>
          <td class="text-center"><u>INSTALLATION REPORT</u></td>
          <td class="text-center">
            <input type="date" class="form-control" id="reportDate">
          </td>
        </tr>
      </tbody>
    </table>

    <!-- New Table 1 -->
    <table class="table table-bordered">
      <tbody>
        <tr>
          <td>
            <div class="form-col">
              <div class="form-group">
                <div class="form-group-content">
                  <label for="customerDetails" class="form-label">Customer Details:</label>
                  <input type="text" id="customerDetails" class="form-control">
                </div>
              </div>
              <div class="form-group">
                <div class="form-group-content">
                  <label for="project" class="form-label">Project:</label>
                  <input type="text" id="project" class="form-control">
                </div>
              </div>
              <div class="form-group">
                <div class="form-group-content">
                  <label for="poNoDate" class="form-label">P.O No. & Date:</label>
                  <input type="text" id="poNoDate" class="form-control">
                </div>
              </div>
            </div>
          </td>
          <td>
            <div class="form-col">
              <div class="form-group row">
                <label for="vehicleModel" class="col-sm-6 col-form-label form-label">Vehicle Model:</label>
                <div class="col-sm-6">
                  <input type="text" id="vehicleModel" class="form-control">
                </div>
              </div>
              <div class="form-group row">
                <label for="vehicleSlNo" class="col-sm-6 col-form-label form-label">Vehicle SL No:</label>
                <div class="col-sm-6">
                  <input type="text" id="vehicleSlNo" class="form-control">
                </div>
              </div>
              <div class="form-group row">
                <label for="equipmentType" class="col-sm-6 col-form-label form-label">Type Of Equipment:</label>
                <div class="col-sm-6">
                  <input type="text" id="equipmentType" class="form-control">
                </div>
              </div>
              <div class="form-group row">
                <label for="installationHMR" class="col-sm-6 col-form-label form-label">Installation HMR:</label>
                <div class="col-sm-6">
                  <input type="text" id="installationHMR" class="form-control">
                </div>
              </div>
              <div class="form-group row">
                <label for="failureHMR" class="col-sm-6 col-form-label form-label">Failure HMR:</label>
                <div class="col-sm-6">
                  <input type="text" id="failureHMR" class="form-control">
                </div>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- New Table 2 (PROCEDURE) -->
    <h4>Procedure</h4>
    <table class="table table-bordered procedure-table">
      <thead>
        <tr>
          <th>Serial Number</th>
          <th>Input 1</th>
          <th>Input 2</th>
        </tr>
      </thead>
      <tbody id="procedureTableBody">
        <tr>
          <td><input type="text" class="form-control" readonly></td>
          <td><textarea class="form-control" data-type="input1" onkeydown="handleKeyDown(event)"></textarea></td>
          <td><textarea class="form-control" data-type="input2" onkeydown="handleKeyDown(event)"></textarea></td>
        </tr>
      </tbody>
    </table>
    <div class="form-group">
      <label for="remarks">Remarks:</label>
      <input id="remarks" class="form-control input-data">
    </div>
    <div class="container d-flex flex-column flex-md-row justify-content-between">
      <div class="datauee mb-3 mb-md-0">
        <p>For Uee:</p>
        <input id="forUee" placeholder="text" class="form-control">
      </div>
      <div class="datauee">
        <p>For Customer:</p>
        <input id="forCustomer" placeholder="text" class="form-control">
      </div>
    </div>

    <!-- Buttons Section -->
    <div class="button-container d-flex justify-content-between mt-4">
      <button type="button" class="btn btn-primary" onclick="generateReport()">Generate Report</button>
      <button type="button" class="btn btn-secondary" onclick="window.print()">Print</button>
      <button type="button" class="btn btn-secondary" onclick="saveForm()">Save</button>
    </div>
  </main>

  <!-- Footer Section -->
  <footer class="footer bg-dark text-white py-4">
    <div class="container text-center">
      <p>Singapura Garden No.35 Neelasri Nilaya Lakshmipura Main Road, Jalahalli West,</p>
      <p>Bengaluru Urban Karnataka 560015</p>
      <p>Email: eande.universal@gmail.com, surajsk053@gmail.com Mob:+91 9640127499 8494900615</p>
    </div>
  </footer>

  <!-- JavaScript Files -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.4.0/dist/umd/popper.min.js"></script>
  <script src="script.js"></script>
</body>

<script>
  function generateRepNumber() {
    return 'REP No ' + Math.floor(Math.random() * 10000);
  }

  document.addEventListener('DOMContentLoaded', function () {
    document.getElementById('repNo').textContent = generateRepNumber();
    updateSerialNumbers();  // Ensure serial numbers are updated on page load
  });

  function handleKeyDown(event) {
    const textarea = event.target;

    if (event.key === 'Enter') {
      event.preventDefault();
      addNewRow();
    } else if (event.key === 'Tab') {
      event.preventDefault();
      handleTabKey(event);
    }

    saveForm();
  }

  function handleTabKey(event) {
      const textarea = event.target;
      const cell = textarea.closest('td');
      const cellIndex = Array.from(cell.parentElement.children).indexOf(cell);

      // Determine the next focus target
      const rows = Array.from(document.querySelectorAll('#procedureTableBody tr'));
      const currentRowIndex = rows.indexOf(textarea.closest('tr'));
      let nextTextarea;

      if (event.key === 'Tab' && cellIndex === 2 && textarea.dataset.type.startsWith('input2')) {
          // Prevent default tab behavior
          event.preventDefault();

          // Create a new textarea and append it to the current cell
          nextTextarea = document.createElement('textarea');
          nextTextarea.className = 'form-control';
          nextTextarea.dataset.type = `input2.${Date.now()}`;
          nextTextarea.onkeydown = handleKeyDown;
          cell.appendChild(nextTextarea);
          nextTextarea.focus();
      } else if (event.key === 'Tab') {
          // Handle tab navigation
          event.preventDefault();
          const focusableElements = Array.from(document.querySelectorAll('textarea'));
          const currentIndex = focusableElements.indexOf(textarea);
          const nextIndex = (currentIndex + 1) % focusableElements.length;

          nextTextarea = focusableElements[nextIndex];
          nextTextarea.focus();
      } else if (event.key === 'Enter') {
          // Allow the Enter key to create a new line within the textarea
          addNewRow(textarea.closest('tr'));
      }
  }

  function addNewRow(currentRow) {
      let tableBody = currentRow ? currentRow.closest('tbody') : document.getElementById('procedureTableBody');
      let newRow = document.createElement('tr');
      newRow.innerHTML = `
          <td><input type="text" class="form-control" readonly></td>
          <td><textarea class="form-control" data-type="input1" onkeydown="handleKeyDown(event)"></textarea></td>
          <td><textarea class="form-control" data-type="input2" onkeydown="handleKeyDown(event)"></textarea></td>
      `;
      tableBody.appendChild(newRow);
      updateSerialNumbers();  // Update the serial numbers after adding the new row
  }

  function updateSerialNumbers() {
      let tableBody = document.querySelector('#procedureTableBody');
      let rows = tableBody.querySelectorAll('tr');
      rows.forEach((row, index) => {
          let serialCell = row.querySelector('td:first-child input');
          serialCell.value = index + 1;  // Update the serial number
      });
  }

  function saveForm() {
      const data = {
          repNo: document.getElementById('repNo').textContent,
          reportDate: document.getElementById('reportDate').value,
          customerDetails: document.getElementById('customerDetails').value,
          project: document.getElementById('project').value,
          poNoDate: document.getElementById('poNoDate').value,
          vehicleModel: document.getElementById('vehicleModel').value,
          vehicleSlNo: document.getElementById('vehicleSlNo').value,
          equipmentType: document.getElementById('equipmentType').value,
          installationHMR: document.getElementById('installationHMR').value,
          failureHMR: document.getElementById('failureHMR').value,
          remarks: document.getElementById('remarks').value,
          forUee: document.getElementById('forUee').value,
          forCustomer: document.getElementById('forCustomer').value,
          procedure: Array.from(document.querySelectorAll('#procedureTableBody tr')).map(row => {
              let inputs = Array.from(row.querySelectorAll('td textarea'));
              return {
                  serialNumber: row.querySelector('td input[readonly]').value,
                  input1: inputs.find(input => input.dataset.type === 'input1').value,
                  input2: inputs.filter(input => input.dataset.type.startsWith('input2')).map(input => input.value)
              };
          })
      };

      localStorage.setItem('formData', JSON.stringify(data));
  }

  function generateReport() {
      saveForm();
      window.location.href = 'report.html';
  }

  // Attach the handleKeyDown function to all existing textareas
  document.querySelectorAll('textarea').forEach(textarea => {
      textarea.onkeydown = handleKeyDown;
  });
</script>

</body>

</html>
